##
## WLD-521-R1 — ESPHome Modbus package (MiniPLC/MicroPLC ↔ WLD)
##

substitutions:
  wld_id: wld_1
  wld_prefix: "WLD#1"
  wld_address: "3"     # firmware default Modbus ID

# If UART/MODBUS aren’t defined globally, uncomment & set pins:
# uart:
#   id: rs485_uart
#   tx_pin: GPIO4         # set to your RS-485 TX
#   rx_pin: GPIO5         # set to your RS-485 RX
#   baud_rate: 19200
#   parity: NONE
#   stop_bits: 1
# modbus:
#   id: modbus_bus
#   uart_id: rs485_uart

modbus_controller:
  - id: ${wld_id}
    address: ${wld_address}
    modbus_id: modbus_bus
    update_interval: 1s
    command_throttle: 0ms


binary_sensor:
  - platform: modbus_controller
    name: "${wld_prefix} DI1"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 1
  - platform: modbus_controller
    name: "${wld_prefix} DI2"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 2
  - platform: modbus_controller
    name: "${wld_prefix} DI3"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 3
  - platform: modbus_controller
    name: "${wld_prefix} DI4"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 4
  - platform: modbus_controller
    name: "${wld_prefix} DI5"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 5

  - platform: modbus_controller
    name: "${wld_prefix} Relay R1 (state)"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 60
  - platform: modbus_controller
    name: "${wld_prefix} Relay R2 (state)"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 61

  - platform: modbus_controller
    name: "${wld_prefix} LED1"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 90
  - platform: modbus_controller
    name: "${wld_prefix} LED2"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 91
  - platform: modbus_controller
    name: "${wld_prefix} LED3"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 92
  - platform: modbus_controller
    name: "${wld_prefix} LED4"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 93

  - platform: modbus_controller
    name: "${wld_prefix} BTN1"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 100
  - platform: modbus_controller
    name: "${wld_prefix} BTN2"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 101
  - platform: modbus_controller
    name: "${wld_prefix} BTN3"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 102
  - platform: modbus_controller
    name: "${wld_prefix} BTN4"
    modbus_controller_id: ${wld_id}
    register_type: discrete_input
    address: 103

# -------------------------------
# HOLDING REGISTERS: TIME/DAY
# -------------------------------
sensor:
  - platform: modbus_controller
    name: "${wld_prefix} Minutes Since Midnight"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1100
    value_type: U_WORD
    accuracy_decimals: 0

  - platform: modbus_controller
    name: "${wld_prefix} Day Index"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1101
    value_type: U_WORD
    accuracy_decimals: 0

  # -------------------------------
  # FLOW per DI (U32 ×1000)
  # -------------------------------
  - platform: modbus_controller
    name: "${wld_prefix} DI1 Flow Rate L/min"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1120
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI2 Flow Rate L/min"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1122
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI3 Flow Rate L/min"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1124
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI4 Flow Rate L/min"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1126
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI5 Flow Rate L/min"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1128
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001

  - platform: modbus_controller
    name: "${wld_prefix} DI1 Total Liters"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1140
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI2 Total Liters"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1142
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI3 Total Liters"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1144
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI4 Total Liters"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1146
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI5 Total Liters"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1148
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001

  # -------------------------------
  # HEAT per DI
  # -------------------------------
  # Power (S32, Watts)
  - platform: modbus_controller
    name: "${wld_prefix} DI1 Heat Power W"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1200
    value_type: S_DWORD
    accuracy_decimals: 0
  - platform: modbus_controller
    name: "${wld_prefix} DI2 Heat Power W"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1202
    value_type: S_DWORD
    accuracy_decimals: 0
  - platform: modbus_controller
    name: "${wld_prefix} DI3 Heat Power W"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1204
    value_type: S_DWORD
    accuracy_decimals: 0
  - platform: modbus_controller
    name: "${wld_prefix} DI4 Heat Power W"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1206
    value_type: S_DWORD
    accuracy_decimals: 0
  - platform: modbus_controller
    name: "${wld_prefix} DI5 Heat Power W"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1208
    value_type: S_DWORD
    accuracy_decimals: 0

  # Energy (U32, Wh×1000)
  - platform: modbus_controller
    name: "${wld_prefix} DI1 Heat Energy kWh"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1220
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI2 Heat Energy kWh"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1222
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI3 Heat Energy kWh"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1224
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI4 Heat Energy kWh"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1226
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI5 Heat Energy kWh"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1228
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001

  # Delta-T (S32, °C×1000)
  - platform: modbus_controller
    name: "${wld_prefix} DI1 DeltaT °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1240
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI2 DeltaT °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1242
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI3 DeltaT °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1244
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI4 DeltaT °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1246
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} DI5 DeltaT °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1248
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001

  # -------------------------------
  # IRRIGATION (Z1..Z2)
  # -------------------------------
  - platform: modbus_controller
    name: "${wld_prefix} Irrigation Z1 State"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1300
    value_type: U_WORD
    accuracy_decimals: 0
  - platform: modbus_controller
    name: "${wld_prefix} Irrigation Z2 State"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1301
    value_type: U_WORD
    accuracy_decimals: 0

  - platform: modbus_controller
    name: "${wld_prefix} Irrigation Z1 Liters"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1310
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} Irrigation Z2 Liters"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1312
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001

  - platform: modbus_controller
    name: "${wld_prefix} Irrigation Z1 Elapsed s"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1320
    value_type: U_DWORD
    accuracy_decimals: 0
  - platform: modbus_controller
    name: "${wld_prefix} Irrigation Z2 Elapsed s"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1322
    value_type: U_DWORD
    accuracy_decimals: 0

  - platform: modbus_controller
    name: "${wld_prefix} Irrigation Z1 Rate L/min"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1330
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} Irrigation Z2 Rate L/min"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1332
    value_type: U_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001

  - platform: modbus_controller
    name: "${wld_prefix} Z1 Window Open"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1340
    value_type: U_WORD
    accuracy_decimals: 0
  - platform: modbus_controller
    name: "${wld_prefix} Z2 Window Open"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1341
    value_type: U_WORD
    accuracy_decimals: 0
  - platform: modbus_controller
    name: "${wld_prefix} Z1 Sensors OK"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1342
    value_type: U_WORD
    accuracy_decimals: 0
  - platform: modbus_controller
    name: "${wld_prefix} Z2 Sensors OK"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1343
    value_type: U_WORD
    accuracy_decimals: 0

  # -------------------------------
  # 1-Wire Temps (S32, °C×1000)
  # -------------------------------
  - platform: modbus_controller
    name: "${wld_prefix} 1W Temp 1 °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1500
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} 1W Temp 2 °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1502
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} 1W Temp 3 °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1504
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} 1W Temp 4 °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1506
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} 1W Temp 5 °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1508
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} 1W Temp 6 °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1510
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} 1W Temp 7 °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1512
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} 1W Temp 8 °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1514
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} 1W Temp 9 °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1516
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001
  - platform: modbus_controller
    name: "${wld_prefix} 1W Temp 10 °C"
    modbus_controller_id: ${wld_id}
    register_type: holding
    address: 1518
    value_type: S_DWORD
    accuracy_decimals: 3
    filters:
      - multiply: 0.001

# -------------------------------
# COMMAND COILS: INTERNAL SWITCHES (no 'optimistic')
# -------------------------------
switch:
  # Relays ON (200/201) and OFF (210/211)
  - platform: modbus_controller
    id: ${wld_id}_coil_r1_on
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 200
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_r2_on
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 201
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_r1_off
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 210
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_r2_off
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 211
    internal: true

  # DI enable (300..304)
  - platform: modbus_controller
    id: ${wld_id}_coil_di1_en
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 300
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_di2_en
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 301
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_di3_en
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 302
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_di4_en
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 303
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_di5_en
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 304
    internal: true

  # DI disable (320..324)
  - platform: modbus_controller
    id: ${wld_id}_coil_di1_dis
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 320
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_di2_dis
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 321
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_di3_dis
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 322
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_di4_dis
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 323
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_di5_dis
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 324
    internal: true

  # DI counter reset (340..344)
  - platform: modbus_controller
    id: ${wld_id}_coil_di1_rst
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 340
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_di2_rst
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 341
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_di3_rst
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 342
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_di4_rst
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 343
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_di5_rst
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 344
    internal: true

  # Midnight pulse (360)
  - platform: modbus_controller
    id: ${wld_id}_coil_midnight
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 360
    internal: true

  # Irrigation Z1/Z2 start/stop/reset (370/371, 380/381, 390/391)
  - platform: modbus_controller
    id: ${wld_id}_coil_irr_z1_start
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 370
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_irr_z2_start
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 371
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_irr_z1_stop
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 380
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_irr_z2_stop
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 381
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_irr_z1_reset
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 390
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_coil_irr_z2_reset
    modbus_controller_id: ${wld_id}
    register_type: coil
    address: 391
    internal: true

# -------------------------------
# COMMAND COILS: BUTTON PULSES
# -------------------------------
button:
  - platform: template
    name: "${wld_prefix} R1 ON"
    on_press:
      - switch.turn_on: ${wld_id}_coil_r1_on
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_r1_on

  - platform: template
    name: "${wld_prefix} R1 OFF"
    on_press:
      - switch.turn_on: ${wld_id}_coil_r1_off
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_r1_off

  - platform: template
    name: "${wld_prefix} R2 ON"
    on_press:
      - switch.turn_on: ${wld_id}_coil_r2_on
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_r2_on

  - platform: template
    name: "${wld_prefix} R2 OFF"
    on_press:
      - switch.turn_on: ${wld_id}_coil_r2_off
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_r2_off

  - platform: template
    name: "${wld_prefix} DI1 Enable"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di1_en
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di1_en
  - platform: template
    name: "${wld_prefix} DI2 Enable"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di2_en
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di2_en
  - platform: template
    name: "${wld_prefix} DI3 Enable"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di3_en
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di3_en
  - platform: template
    name: "${wld_prefix} DI4 Enable"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di4_en
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di4_en
  - platform: template
    name: "${wld_prefix} DI5 Enable"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di5_en
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di5_en

  - platform: template
    name: "${wld_prefix} DI1 Disable"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di1_dis
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di1_dis
  - platform: template
    name: "${wld_prefix} DI2 Disable"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di2_dis
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di2_dis
  - platform: template
    name: "${wld_prefix} DI3 Disable"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di3_dis
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di3_dis
  - platform: template
    name: "${wld_prefix} DI4 Disable"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di4_dis
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di4_dis
  - platform: template
    name: "${wld_prefix} DI5 Disable"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di5_dis
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di5_dis

  - platform: template
    name: "${wld_prefix} DI1 Counter Reset"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di1_rst
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di1_rst
  - platform: template
    name: "${wld_prefix} DI2 Counter Reset"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di2_rst
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di2_rst
  - platform: template
    name: "${wld_prefix} DI3 Counter Reset"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di3_rst
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di3_rst
  - platform: template
    name: "${wld_prefix} DI4 Counter Reset"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di4_rst
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di4_rst
  - platform: template
    name: "${wld_prefix} DI5 Counter Reset"
    on_press:
      - switch.turn_on: ${wld_id}_coil_di5_rst
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_di5_rst

  - platform: template
    name: "${wld_prefix} Midnight Pulse"
    on_press:
      - switch.turn_on: ${wld_id}_coil_midnight
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_midnight

  - platform: template
    name: "${wld_prefix} Irrigation Z1 START"
    on_press:
      - switch.turn_on: ${wld_id}_coil_irr_z1_start
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_irr_z1_start
  - platform: template
    name: "${wld_prefix} Irrigation Z2 START"
    on_press:
      - switch.turn_on: ${wld_id}_coil_irr_z2_start
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_irr_z2_start
  - platform: template
    name: "${wld_prefix} Irrigation Z1 STOP"
    on_press:
      - switch.turn_on: ${wld_id}_coil_irr_z1_stop
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_irr_z1_stop
  - platform: template
    name: "${wld_prefix} Irrigation Z2 STOP"
    on_press:
      - switch.turn_on: ${wld_id}_coil_irr_z2_stop
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_irr_z2_stop
  - platform: template
    name: "${wld_prefix} Irrigation Z1 RESET"
    on_press:
      - switch.turn_on: ${wld_id}_coil_irr_z1_reset
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_irr_z1_reset
  - platform: template
    name: "${wld_prefix} Irrigation Z2 RESET"
    on_press:
      - switch.turn_on: ${wld_id}_coil_irr_z2_reset
      - delay: 200ms
      - switch.turn_off: ${wld_id}_coil_irr_z2_reset

