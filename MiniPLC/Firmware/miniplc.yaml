# ===================== DI enable/disable & counter reset =====================
# Enable: 300+i | Disable: 320+i | Counter reset: 340+i  (i = 0..4)

# Hidden coil helpers (write-only), one per operation
switch:
  # ---- Enable coils (300..304) ----
  - platform: modbus_controller
    id: ${wld_id}_di1_enable_coil
    modbus_controller_id: ${wld_id}
    address: 300
    register_type: coil
    write_only: true
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_di2_enable_coil
    modbus_controller_id: ${wld_id}
    address: 301
    register_type: coil
    write_only: true
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_di3_enable_coil
    modbus_controller_id: ${wld_id}
    address: 302
    register_type: coil
    write_only: true
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_di4_enable_coil
    modbus_controller_id: ${wld_id}
    address: 303
    register_type: coil
    write_only: true
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_di5_enable_coil
    modbus_controller_id: ${wld_id}
    address: 304
    register_type: coil
    write_only: true
    internal: true

  # ---- Disable coils (320..324) ----
  - platform: modbus_controller
    id: ${wld_id}_di1_disable_coil
    modbus_controller_id: ${wld_id}
    address: 320
    register_type: coil
    write_only: true
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_di2_disable_coil
    modbus_controller_id: ${wld_id}
    address: 321
    register_type: coil
    write_only: true
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_di3_disable_coil
    modbus_controller_id: ${wld_id}
    address: 322
    register_type: coil
    write_only: true
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_di4_disable_coil
    modbus_controller_id: ${wld_id}
    address: 323
    register_type: coil
    write_only: true
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_di5_disable_coil
    modbus_controller_id: ${wld_id}
    address: 324
    register_type: coil
    write_only: true
    internal: true

  # ---- Counter reset coils (340..344) ----
  - platform: modbus_controller
    id: ${wld_id}_di1_reset_coil
    modbus_controller_id: ${wld_id}
    address: 340
    register_type: coil
    write_only: true
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_di2_reset_coil
    modbus_controller_id: ${wld_id}
    address: 341
    register_type: coil
    write_only: true
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_di3_reset_coil
    modbus_controller_id: ${wld_id}
    address: 342
    register_type: coil
    write_only: true
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_di4_reset_coil
    modbus_controller_id: ${wld_id}
    address: 343
    register_type: coil
    write_only: true
    internal: true
  - platform: modbus_controller
    id: ${wld_id}_di5_reset_coil
    modbus_controller_id: ${wld_id}
    address: 344
    register_type: coil
    write_only: true
    internal: true

button:
  # ---- Enable buttons ----
  - platform: template
    name: "${wld_prefix} DI1 Enable"
    on_press: { then: [ switch.turn_on: ${wld_id}_di1_enable_coil ] }
  - platform: template
    name: "${wld_prefix} DI2 Enable"
    on_press: { then: [ switch.turn_on: ${wld_id}_di2_enable_coil ] }
  - platform: template
    name: "${wld_prefix} DI3 Enable"
    on_press: { then: [ switch.turn_on: ${wld_id}_di3_enable_coil ] }
  - platform: template
    name: "${wld_prefix} DI4 Enable"
    on_press: { then: [ switch.turn_on: ${wld_id}_di4_enable_coil ] }
  - platform: template
    name: "${wld_prefix} DI5 Enable"
    on_press: { then: [ switch.turn_on: ${wld_id}_di5_enable_coil ] }

  # ---- Disable buttons ----
  - platform: template
    name: "${wld_prefix} DI1 Disable"
    on_press: { then: [ switch.turn_on: ${wld_id}_di1_disable_coil ] }
  - platform: template
    name: "${wld_prefix} DI2 Disable"
    on_press: { then: [ switch.turn_on: ${wld_id}_di2_disable_coil ] }
  - platform: template
    name: "${wld_prefix} DI3 Disable"
    on_press: { then: [ switch.turn_on: ${wld_id}_di3_disable_coil ] }
  - platform: template
    name: "${wld_prefix} DI4 Disable"
    on_press: { then: [ switch.turn_on: ${wld_id}_di4_disable_coil ] }
  - platform: template
    name: "${wld_prefix} DI5 Disable"
    on_press: { then: [ switch.turn_on: ${wld_id}_di5_disable_coil ] }

  # ---- Counter reset buttons ----
  - platform: template
    name: "${wld_prefix} DI1 Counter Reset"
    on_press: { then: [ switch.turn_on: ${wld_id}_di1_reset_coil ] }
  - platform: template
    name: "${wld_prefix} DI2 Counter Reset"
    on_press: { then: [ switch.turn_on: ${wld_id}_di2_reset_coil ] }
  - platform: template
    name: "${wld_prefix} DI3 Counter Reset"
    on_press: { then: [ switch.turn_on: ${wld_id}_di3_reset_coil ] }
  - platform: template
    name: "${wld_prefix} DI4 Counter Reset"
    on_press: { then: [ switch.turn_on: ${wld_id}_di4_reset_coil ] }
  - platform: template
    name: "${wld_prefix} DI5 Counter Reset"
    on_press: { then: [ switch.turn_on: ${wld_id}_di5_reset_coil ] }
